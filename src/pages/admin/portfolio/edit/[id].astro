<!-- ---
// src/pages/admin/edit/[id].astro
import { db, Group, eq } from "astro:db";

const id = Number(Astro.params.id);
const [group] = await db.select().from(Group).where(eq(Group.id, id));

if (!group) return Astro.redirect("/admin");

if (Astro.request.method === "POST") {
  const form = await Astro.request.formData();
  const title = form.get("title") as string;
  const link = form.get("link") as string;
  await db.update(Group).set({ title, link }).where(eq(Group.id, id));
  return Astro.redirect("/admin");
}

export const prerender = false;
---

<html lang="ru">
  <head>
    <meta charset="UTF-8" />
  </head>
  <body>
    <h1>Редактировать группу</h1>
    <form method="post">
      <input type="text" name="title" value={group.title} required />
      <input type="text" name="link" value={group.link} required />
      <button type="submit">Сохранить</button>
    </form>
  </body>
</html> -->
